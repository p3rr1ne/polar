class AccountManager{static list(){return Object.values(String.loadItem("my-alt-accounts",{}))}static prepare(e){e=parseInt(e);isNaN(e)||e===_userdata?.user_id?String.removeItem("new-account"):(String.saveItem("new-account",e),this.logout().then(e=>{console.log("logged out")}))}static async logout(){_userdata?.session_logged_in?([...(await(await fetch("/login?logout=1")).text()).matchAll(/<input[^>]*name=['"](tid|key)['"][^>]*value=['"]([^"']*)['"][^>]*>/gi)].forEach(e=>{window[e[1]]=e[2]}),await fetch("/login?logout=1&key="+window.key+"&tid="+window.tid).then(e=>this.switch())):this.switch()}static switch(){let t=parseInt(String.loadItem("new-account","")),e=this.list();var a=e.filter(e=>e.userid==t);1===a.length&&(Cookies.set("fa_polaris-rpg_forumactif_com_data",a[0].sid,{expires:365}),window.location.reload())}static start(){var a=String.loadItem("my-alt-accounts",{});if("undefined"!=typeof _userdata&&_userdata.session_logged_in){let t=0,e=Math.max.apply(Math,Object.values(a).map(e=>e.order||t++));var r=a[_userdata.user_id]?a[_userdata.user_id].order:e+1;a[_userdata.user_id]={userid:_userdata.user_id,avatar:_userdata.avatar_link,name:_userdata.username,sid:Cookies.get("fa_polaris-rpg_forumactif_com_data"),order:r},String.saveItem("my-alt-accounts",a)}}}document.addEventListener("alpine:init",()=>{var e=String.loadItem("darkMode",!1),e=(console.log("alpine loaded"),Alpine.store("darkMode",{on:e,toggle(){this.on=!this.on,String.saveItem("darkMode",this.on,!0),TextEditor.toggleDarkMode()}}),Alpine.store("modale",{opened:!1,open(){this.opened=!0},close(){this.opened=!1}}),String.loadItem("navbar",!1));Alpine.store("navbar",{on:e,toggle(){this.on=!this.on,String.saveItem("navbar",this.on,!0)}}),Alpine.store("user",{loggedIn:!1,data:AnonymousUser,toggle(){this.loggedIn=!this.loggedIn,this.update()},update(){this.loggedIn?this.data=CurrentUser:this.data=AnonymousUser}});Alpine.directive("date",(e,{expression:t},{evaluate:a})=>{var a=a(t),t="false"!==e.dataset.day,r="false"!==e.dataset.month;"string"==typeof a&&(e.textContent=String.convertDate(a,t,r))}),0<CurrentUser.userId?Alpine.store("user").toggle():Alpine.store("user").update()});class Avatar{static defaultUrl(){return"https://i.imgur.com/C2Lu0U8.png"}static isDefaultUrl(e){return e===this.defaultUrl()}static defaultData(){var e=new FormData;return e.set("avatarurl",""),e.set("username",document.getElementsByName("username")[0].value),e.set("email",document.getElementsByName("email")[0].value),e.set("user_id",document.getElementsByName("user_id")[0].value),e.set("current_email",""),e.set("submit","Enregistrer"),e.set("page_profil","avatars"),e.set("mode","editprofile"),e.set("agreed","true"),e.set("coppa",""),e}static async add(e,t=null){var a=this.defaultData();a.set("avatarremoteurl",e),await this.submit(a,t)}static async delete(e=null){var t=this.defaultData();t.set("avatardel","on"),await this.submit(t,e)}static async submit(e,t){await fetch("/profile",{method:"POST",body:e}).then(e=>{null===t?window.location.reload():t()})}}class NotionPage{constructor(e,t){this.content="",this.className=t,this.source=e,this.time=Date.now()}ready(){return""!==this.content&&void 0!==this.content}async submit(){var e;""===this.content&&(e=`https://hosting.forums-rpg.fr/popolaris/output/${this.source}.json`,this.content=await fetch(e).then(e=>e.json()).then(e=>"results"in e?e.results:[]).then(e=>new NotionValueFormatter(e,this.className).read()))}}class NotionCollection extends NotionPage{}class JsonCollection{constructor(e){this.items=[],this.query=`https://hosting.forums-rpg.fr/popolaris/output/${e}.json`}async submit(){this.items=await fetch(this.query).then(e=>e.json())}}class XMLCollection{constructor(e){this.items=[],this.query="https://polaris-rpg.forumactif.com/"+e}async submit(){this.items=await fetch(this.query).then(e=>e.text()).then(e=>xml2json(e)).then(e=>"rss"in e?e.rss:[]).then(e=>"channel"in e?e.channel:[]).then(e=>"item"in e?e.item:[])}}((e,t)=>{var a,r;"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self,a=e.Cookies,(r=e.Cookies=t()).noConflict=function(){return e.Cookies=a,r})})(this,function(){function n(e){for(var t=1;t<arguments.length;t++){var a,r=arguments[t];for(a in r)e[a]=r[a]}return e}return function t(o,i){function a(e,t,a){if("undefined"!=typeof document){"number"==typeof(a=n({},i,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r,s="";for(r in a)a[r]&&(s+="; "+r,!0!==a[r])&&(s+="="+a[r].split(";")[0]);return document.cookie=e+"="+o.write(t,e)+s}}return Object.create({set:a,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],a={},r=0;r<t.length;r++){var s=t[r].split("="),i=s.slice(1).join("=");try{var n=decodeURIComponent(s[0]);if(a[n]=o.read(i,n),e===n)break}catch(e){}}return e?a[e]:a}},remove:function(e,t){a(e,"",n({},t,{expires:-1}))},withAttributes:function(e){return t(this.converter,n({},this.attributes,e))},withConverter:function(e){return t(n({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(o)}})}({read:function(e){return(e='"'===e[0]?e.slice(1,-1):e).replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}),document.addEventListener("DOMContentLoaded",()=>{var e,t=document.querySelector(".page-body"),t=new HtmlLayoutDriver(window.location.pathname,window.location.search.replace("?","").split("&"),t.innerHTML);t.match()&&null!==(e=document.querySelector(".page-body"))&&(e.innerHTML=t.parse(e.innerHTML)),document.querySelectorAll("code").forEach(e=>{var t=e.offsetHeight;e.outerHTML=`<textarea @click="$el.select(), $el.setSelectionRange(0, 99999), document.execCommand('copy')"
class="w-full" style="height:${t}px">${e.innerHTML.replace(/<br[^>]*>/gi,"\n")}</textarea>`})});class HtmlLayoutDriver{formatters=[HtmlNewAnswerResponse,HtmlConfirmMessageResponse,HtmlMessageResponse,HtmlChangePwdResponse,HtmlLoginResponse,HtmlForgottenPwdResponse,HtmlRegisterStep1Response,HtmlRegisterStep2Response,HtmlWatchListResponse,HtmlNotificationResponse];formatter=null;constructor(t,a,r){this.formatters.forEach(e=>{e.match(t,a,r)&&null===this.formatter&&(this.formatter=e)})}match(){return null!==this.formatter}title(){return this.match()?this.formatter.title:null}parse(e){return this.match()?this.formatter.execute(e):e}}class HtmlNewAnswerResponse{static get title(){return"informations"}static match(e,t,a){return-1<a.indexOf("Un nouveau message vient d'être ajouté pendant que vous écriviez le vôtre")}static execute(e){return document.querySelector(".page-body").innerHTML.replace(/<br[^>]*>(Un nouveau message vient d'être ajouté pendant que vous écriviez le vôtre)/gi,'<span class="block Main:Block:Pa mb-6"><span class="block Title:H3 Main:Block:Who:Title py-6 pl-8 text-left">Informations</span><span class="block p-6">$1').replace(/(Vous pouvez consulter les derniers messages postés ci-dessous et ainsi décider si vous voulez le modifier ou l'enregistrer.)<br[^>]*>/gi,'$1<span class="block">\n    <label for="edit_button" class="mt-4 mr-2 cursor-pointer Main:Secondary:Bouton">Modifier</label>\n    <label for="save_button" class="mt-4 mr-2 cursor-pointer Main:Primary:Bouton">Enregistrer</label>\n</span></span></span>').replace(/<p style="text-align:center">/gi,'<p class="Main:Paragraphe">').replace(/<div class="h3">[^<]*<\/div>/gi,"").replace(/<div class="panel row2">/gi,'<div class="hidden panel row2">').replace(/<input type="submit"([^>]*)class=["']button2["']>/gi,'<input id="edit_button" class="hidden" type="submit"$1>').replace(/<input type="submit"([^>]*)class=["']button1["']>/gi,'<input id="save_button" class="hidden" type="submit"$1>')}}class HtmlWatchListResponse{static get title(){return"Sujets surveillés"}static get src(){return"search"}static get parameter(){return"search_id=watchsearch"}static match(e,t,a){return e.split("/").slice(-1)[0]===this.src&&t.find(e=>e===this.parameter)}static execute(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=document.querySelector(".ucp-main").outerHTML).replace(/<h1[^>]*>[^<]*<\/h1>/gi,"")).replace(/<br[^>]*>/gi," ")).replace(/<strong[^>]*>/gi,"")).replace(/<\/strong>/gi,"")).replace(/(Rechercher dans|Réponses|Vues|Auteur)/gi,"")).replace(/right-box/gi,"hidden")).replace(/topictitle/gi,"topictitle line-clamp-1")).replace(/<img[^>]*>/gi,"")).replace(/<th[^>]*>X<\/th>/gi,"<th></th>")).replace(/<th[^>]*>Derniers Messages<\/th>/gi,'<th width="200px">Dernière réponse</th>')).replace(/<td[^>]*>([0-9]+)<\/td>/gi,"")).replace(/<td class="posts"><a href="\/u[^>]*>[^<]*<\/a><\/td>/gi,"")).replace(/<td class="posts"><a href="\/u[^>]*><span[^>]*>[^<]*<\/span><\/a><\/td>/gi,"")).replace(/<a[^>]*href="\/f[^>]*>[^<]*<\/a>/gi,"")).replace(/<td([^>]*)>(lun|mar|mer|jeu|ven|sam|dim) /gi,"<td$1>")).replace(/20([0-9]{2})/gi,"$1")).replace(/&(nbsp|amp|quot|lt|gt);/gi,"")).replace(/Annonce:/gi,"")).replace(/<th[^>]*><\/th>/gi,"")).replace(/<td[^>]*><\/td>/gi,"")).replace(/<td[^>]*>/gi,'<td class="py-4 pr-2 border-t-1 border-t-secondary-gray dark:border-t-background-dark">')).replace(/<tr[^>]*>/gi,'<tr class="text-[14px]/[100%]">')).replace(/<th>/gi,'<th class="dark:text-secondary-gold text-main-blue text-left !font-normal whitespace-nowrap pb-4 pr-4">')).replace(/<th ([^>]*)>/gi,'<th class="dark:text-secondary-gold text-main-blue text-left !font-normal whitespace-nowrap pb-4 pr-4" $1>')).replace(/<input type="submit"[^>]*value="([^"]*)"[^>]*class=["']button1["'][^>]*>/gi,`<div class="grid grid-cols-2 mt-2 gap-4">
    <button class="cursor-pointer Main:Primary:Bouton" name="valid" value="$1" type="submit">Arrêter de surveiller</button>
    <a href="javascript:history.back()" class="text-center Main:Tertiary:Bouton">Retour</a>
</div>`),`<x-modal data-title="${this.title}" data-opened="true">
            <div class="max-md:w-full md:max-w-[600px]">
                ${e}
            </div>
        </x-modal>`}}class HtmlNotificationResponse{static get title(){return"notifications"}static get src(){return"profile"}static get parameter(){return"page_profil=notifications"}static match(e,t,a){return e.split("/").slice(-1)[0]===this.src&&t.find(e=>e===this.parameter)}static execute(e){return e=(e=(e=(e=(e=(e=document.querySelector(".ucp-main").outerHTML).replace(/<h1[^>]*>[^<]*<\/h1>/gi,"")).replace(/et Toolbar/gi,"")).replace(/right-box/gi,"hidden")).replace(/<th ([^>]*)>/gi,'<th class="dark:text-secondary-gold text-main-blue text-left !font-normal whitespace-nowrap pb-4 pr-4" $1>')).replace(/<input class=["']button1["'] type="submit"[^>]*value="([^"]*)"[^>]*>/gi,`<div class="grid grid-cols-2 gap-4 mt-8">
    <button class="cursor-pointer Main:Primary:Bouton" name="submit" value="$1" type="submit">Valider</button>
    <a href="javascript:history.back()" class="text-center Main:Tertiary:Bouton">Retour</a>
</div>`),`<x-modal data-title="${this.title}" data-opened="true">
            ${e}
        </x-modal>`}}class HtmlConfirmMessageResponse{static get title(){return"informations"}static match(e,t,a){return-1<a.indexOf("template_confirm_body")}static execute(e){return e=(e=(e=(e=document.querySelector(".template_confirm_body").outerHTML).replace(/<a href/gi,'<a class="underline" href')).replace(/<br[^>]*><br[^>]*>/gi,"<br>")).replace(/<input class=["']button2["'] type="submit"([^>]*)value="([^"]*)"([^>]*)>/gi,'<button class="mt-4 mr-2 cursor-pointer Main:Primary:Bouton" type="submit"$1value="$2"$3>$2</button>'),`<x-modal data-title="${this.title}" data-opened="true">
            <div class="max-md:w-full md:max-w-[400px]">
                ${e}
            </div>
        </x-modal>`}}class HtmlMessageResponse{static get title(){return"informations"}static match(e,t,a){return-1<a.indexOf("template_message_body")}static execute(e){return e=(e=(e=document.querySelector(".template_message_body").innerHTML).replace(/<a href/gi,'<a class="underline" href')).replace(/<br[^>]*><br[^>]*>/gi,"<br>"),`<x-modal data-title="${this.title}" data-opened="true">
            <div class="max-md:w-full md:max-w-[400px]">
                ${e}
            </div>
        </x-modal>`}}class HtmlChangePwdResponse{static get title(){return"mot de passe"}static get src(){return"profile"}static get parameter(){return"change_password=Changer+votre+mot+de+passe"}static match(e,t,a){return e.split("/").slice(-1)[0]===this.src&&t.find(e=>e===this.parameter)}static execute(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=document.querySelector(".page-body form").outerHTML).replace(/(Enregistrement|&nbsp;)/gi,"")).replace(/<[^>]*(dl|dt|dd)>/gi,"")).replace(/<[/]?fieldset[^>]*>/gi,"")).replace(/<label>(Mot de passe actuel)[^<]*<\/label>/gi,'<label for="cur_password">$1</label>')).replace(/(name=["']cur_password["'])/gi,'$1 placeholder="Mot de passe actuel" id="cur_password"')).replace(/<label>(Nouveau mot de passe)[^<]*<\/label>/gi,'<label for="new_password">$1</label>')).replace(/(name=["']new_password["'])/gi,'$1 placeholder="Nouveau mot de passe" id="new_password"')).replace(/<label>(Confirmer le mot de passe)[^<]*<\/label>/gi,'<label for="password_confirm">$1</label>')).replace(/(name=["']password_confirm["'])/gi,'$1 placeholder="Confirmer le mot de passe" id="password_confirm"')).replace(/<input([^>]*)class=["']inputbox[^'"]*["']([^>]*)>/gi,'<input $1 $2 required class="mt-2 mb-4 block bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:outline-main-blue dark:focus:ring-secondary-gold focus:border-main-blue dark:focus:border-secondary-gold block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-secondary-gold !outline-none dark:focus:border-secondary-gold">')).replace(/<input[^>]*type=["']reset["']([^>]*)>/gi,'<input type="reset" class="hidden" $1/>')).replace(/<input class=["']button1["'] type="submit"[^>]*value="([^"]*)"[^>]*>/gi,`<div class="grid grid-cols-2 gap-4 mt-8">
    <button class="cursor-pointer Main:Primary:Bouton" name="submit" value="$1" type="submit">Valider</button>
    <a href="javascript:history.back()" class="text-center Main:Tertiary:Bouton">Retour</a>
</div>`),`<x-modal data-title="${this.title}" data-opened="true">
            <div class="max-md:w-full md:max-w-[400px]">
                ${e}
            </div>
        </x-modal>`}}class HtmlForgottenPwdResponse{static get title(){return"mot de passe"}static get src(){return"profile"}static get parameter(){return"mode=sendpassword"}static match(e,t,a){return e.split("/").slice(-1)[0]===this.src&&t.find(e=>e===this.parameter)}static execute(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=document.querySelector(".page-body form").outerHTML).replace(/<h[1-2][^>]*>[^<]*<\/h[1-2]>/gi,'<p class="mb-4 text-sm/6 text-grays-gray2">Envoyez-moi un nouveau mot de passe.</p>')).replace(/<p[^>]*>Les champs[^<]*<\/p>/gi,"").replace(/&nbsp;/gi," ").replace(/<br[/]?>/gi,"")).replace(/<[^>]*(dl|dt|dd)>/gi,"")).replace(/<[/]?fieldset[^>]*>/gi,"")).replace(/<label>(Nom d'utilisateur)[^<]*<\/label>/gi,'<label for="username_reg">$1</label>')).replace(/<label>(Adresse e-mail)[^<]*<\/label>/gi,'<label for="email">$1</label>')).replace(/(name=["']username["'])/gi,'$1 placeholder="Prénom Nom" id="username_reg"')).replace(/(name=["']email["'])/gi,'$1 placeholder="nomprenom@email.com" id="email"')).replace(/<input([^>]*)class=["']inputbox[^'"]*["']([^>]*)>/gi,'<input $1 $2 required class="mt-2 mb-4 block bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:outline-main-blue dark:focus:ring-secondary-gold focus:border-main-blue dark:focus:border-secondary-gold block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-secondary-gold !outline-none dark:focus:border-secondary-gold">')).replace(/<input[^>]*type=["']reset["']([^>]*)>/gi,'<input type="reset" class="hidden" $1/>')).replace(/<input class=["']button2["'] type="submit"[^>]*value="([^"]*)"[^>]*>/gi,`<div class="grid grid-cols-2 gap-4 mt-8">
    <button class="cursor-pointer Main:Primary:Bouton" name="submit" value="$1" type="submit">Valider</button>
    <a href="javascript:history.back()" class="text-center Main:Tertiary:Bouton">Retour</a>
</div>`),`<x-modal data-title="${this.title}" data-opened="true">
            <div class="max-md:w-full md:max-w-[400px]">
                ${e}
            </div>
        </x-modal>`}}class HtmlLoginResponse{static get title(){return"connexion"}static get src(){return"login"}static get parameter(){return"logout"}static match(e,t,a){return e.split("/").slice(-1)[0]===this.src&&!t.find(e=>e===this.parameter)}static execute(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/&nbsp;/gi," ").replace(/<br[/]?>/gi,"")).replace(/<span[^>]*>/gi,"<p>").replace(/<\/span>/gi,"</p>")).replace(/<br[/]?>/gi,"").replace(/:(<\/label>)/gi,"$1")).replace(/<[^>]*(dl|dt|dd)>/gi,"")).replace(/<[/]?fieldset[^>]*>/gi,"")).replace(/<div class=["']h[0-9]["']>[^<]*<\/div>/gi,"")).replace(/<h[1-2][^>]*>[^<]*<\/h[1-2]>/gi,"")).replace(/(name=["']username["'])/gi,'$1 placeholder="Prénom Nom"')).replace(/(name=["']password["'])/gi,'$1 placeholder="Saisissez un mot de passe"')).replace(/<div class=["']social_btn["']>/gi,'<div class="social_btn hidden">')).replace(/<hr class=["']dashed["'][^>]*>/gi,"")).replace(/<a([^>]*href=["']\/register["'][^>]*)>([^<]*)<\/a>/gi,"")).replace(/<a([^>]*href=["']\/profile\?mode=sendpassword["'][^>]*)>([^<]*)<\/a>/gi,`<div class="-mt-2 mb-4 flex justify-between">
            <a class="text-sm underline" $1>Mot de passe oublié</a>
            <a class="text-sm underline" href="/register">Je n'ai pas de compte</a>
        </div>`)).replace(/<label[^>]*for=["']autologin["'][^>]*><input[^>]*>[^<]*Connexion automatique[^<]*<\/label>/gi,`<div class="flex h-6 shrink-0 items-center">
            <div class="group grid size-4 grid-cols-1">
                <input type="checkbox" checked="checked" name="autologin" id="autologin" value="on" class="!bg-none col-start-1 row-start-1 appearance-none rounded border !border-gray-300 bg-white checked:!border-main-blue dark:checked:!border-main-purple checked:!bg-main-blue dark:checked:!bg-main-purple indeterminate:!border-main-blue dark:indeterminate:!border-main-purple indeterminate:!bg-main-blue dark:indeterminate:!bg-main-purple focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-main-blue dark:focus-visible:outline-main-purple disabled:!border-gray-300 disabled:!bg-gray-100 disabled:!checked:bg-gray-100 forced-colors:appearance-auto">
                <svg class="pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-[:disabled]:stroke-gray-950/25" viewBox="0 0 14 14" fill="none"><path class="opacity-0 group-has-[:checked]:opacity-100" d="M3 8L6 11L11 3.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path class="opacity-0 group-has-[:indeterminate]:opacity-100" d="M3 7H11" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>
            </div>
            <label class="ml-2 text-sm/6 text-grays-gray2" for="autologin">Rester en ligne</label>
        </div>`)).replace(/(<a[^>]*>(Cliquez ici pour réessayer)[^<]*<\/a>)/gi,'<p class="underline">$1</p>')).replace(/<a[^>]*>(Cliquez ici pour retourner)[^<]*<\/a>/gi,"")).replace(/<p[^>]*>(La date|Vous n'avez pas encore)[^<]*<\/p>/gi,"")).replace(/<p>[\s]?<\/p>/gi,"").replace(/<p><\/p>/gi,"")).replace(/<input([^>]*)class=["']inputbox[^'"]*["']([^>]*)>/gi,'<input $1 $2 required class="mt-2 mb-4 block bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:outline-main-blue dark:focus:ring-secondary-gold focus:border-main-blue dark:focus:border-secondary-gold block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-secondary-gold !outline-none dark:focus:border-secondary-gold">')).replace(/<input type="submit"[^>]*value="([^"]*)"[^>]*>/gi,`<div class="grid grid-cols-2 gap-4 mt-8">
    <button class="cursor-pointer Main:Primary:Bouton" name="login" value="$1" type="submit">$1</button>
    <a href="javascript:history.back()" class="text-center Main:Tertiary:Bouton">Retour</a>
</div>`),`<x-modal data-title="${this.title}" data-opened="true">
            <div class="max-md:w-full md:max-w-[400px]">
                ${e}
            </div>
        </x-modal>`}}class HtmlRegisterStep1Response{static get title(){return"conditions d'utilisation"}static get src(){return"register"}static get parameter(){return"step=2"}static match(e,t,a){return e.split("/").slice(-1)[0]===this.src&&!t.find(e=>e===this.parameter)}static execute(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/<span[^>]*>/gi,"<p>").replace(/<\/span>/gi,"</p>")).replace(/<p>/gi,'<p class="first:mt-0 my-4">')).replace(/<br[/]?>/gi,"").replace(/([:;])[\n\s]-/gi,"$1 ")).replace(/<h[1-2][^>]*>[^<]*<\/h[1-2]>/gi,"")).replace(/(--max-height:[0-9]+vh)/gi,"$1;--frame-width:calc(100% + var(--col-x))")).replace(/w-full/gi,"w-(--frame-width)")).replace(/<strong[^>]*>([^<]*)<\/strong>./gi,'<span class="block font-bold Title:H4 tracking-wider mb-2">$1</span>')).replace(/(max-h-\(--max-height\))/gi,"$1 -mr-[var(--col-x)] pr-[var(--col-x)]")).replace(/<input[^>]*type="submit"[^>]*value="([^"]*)"[^>]*>/gi,`<div class="grid grid-cols-2 gap-4 mt-8">
    <button class="cursor-pointer Main:Primary:Bouton" value="$1" type="submit">$1</button>
    <a href="javascript:history.back()" class="text-center Main:Tertiary:Bouton">Retour</a>
</div>`),`<x-modal data-title="${this.title}" data-opened="true">${e}</x-modal>`}}class HtmlRegisterStep2Response{static get title(){return"créer un compte"}static get src(){return"register"}static get parameter(){return"step=2"}static match(e,t,a){return e.split("/").slice(-1)[0]===this.src&&t.find(e=>e===this.parameter)}static execute(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/<span class=["']corners-(top|bottom)["']><span><\/span><\/span>/gi,"")).replace(/<h[1-2][^>]*>[^<]*<\/h[1-2]>/gi,"")).replace(/<p[^>]*>Les champs[^<]*<\/p>/gi,"").replace(/&nbsp;/gi," ").replace(/<br[/]?>/gi,"")).replace(/<[^>]*(dl|dt|dd)>/gi,"")).replace(/color:red/gi,"")).replace(/class=["']([^"]*bg-red-100[^"]*)["']/gi,'style="--frame-width:calc(100% + (var(--col-x)*2))" class="$1 rounded-none -mt-[var(--col-y)] -ml-[var(--col-x)] w-(--frame-width)"')).replace(/<form ([^>]*)>/gi,`<form action="/${HtmlRegisterStep2Response.src}?step=2&agreement=1&privacy=1" class="md:max-w-97" $1>`)).replace(/<label>(Nom d'utilisateur)[^<]*<\/label>/gi,'<label for="username_reg">$1</label>')).replace(/<label>(Adresse e-mail)[^<]*<\/label>/gi,'<label for="email">$1</label>')).replace(/<label>(Mot de passe)[^<]*<\/label>/gi,'<label for="password_reg">$1</label>')).replace(/(name=["']username["'])/gi,'$1 placeholder="Prénom Nom"')).replace(/(name=["']password["'])/gi,'$1 placeholder="Saisissez un mot de passe"')).replace(/(name=["']email["'])/gi,'$1 placeholder="nomprenom@email.com"')).replace(/<div id=["']cont_pwd["']([^>]*)>/gi,'<div class="hidden">')).replace(/<input[^>]*class=["']inputbox[^'"]*["']([^>]*)>/gi,'<input required class="mt-2 mb-4 block bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:outline-main-blue dark:focus:ring-secondary-gold focus:border-main-blue dark:focus:border-secondary-gold block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-secondary-gold !outline-none dark:focus:border-secondary-gold"$1>')).replace("<label>Pré-remplir le formulaire</label>","")).replace(/<input[^>]*type=["']reset["']([^>]*)>/gi,'<input type="reset" class="hidden" $1/>')).replace(/<input ([^>]*) id=["']wantsnews["']([^>]*)>[^<]*<label>(J'accepte[^<]*)<\/label>/gi,`<div class="flex gap-3">
            <div class="flex h-6 shrink-0 items-center">
                <div class="group grid size-4 grid-cols-1">
                    <input $1 id="wantsnews" class="!bg-none col-start-1 row-start-1 appearance-none rounded border !border-gray-300 bg-white checked:!border-main-blue dark:checked:!border-main-purple checked:!bg-main-blue dark:checked:!bg-main-purple indeterminate:!border-main-blue dark:indeterminate:!border-main-purple indeterminate:!bg-main-blue dark:indeterminate:!bg-main-purple focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-main-blue dark:focus-visible:outline-main-purple disabled:!border-gray-300 disabled:!bg-gray-100 disabled:!checked:bg-gray-100 forced-colors:appearance-auto" $2>
                    <svg class="pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-[:disabled]:stroke-gray-950/25" viewBox="0 0 14 14" fill="none"><path class="opacity-0 group-has-[:checked]:opacity-100" d="M3 8L6 11L11 3.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path class="opacity-0 group-has-[:indeterminate]:opacity-100" d="M3 7H11" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                </div>
            </div>
            <label class="text-sm/6 text-grays-gray2" for="wantsnews">$3</label>
        </div>`)).replace(/<input[^>]*type="submit"[^>]*value="([^"]*)"[^>]*>/gi,`<div class="mb-8">
            <div class="mt-4 mb-2 text-sm/6 text-grays-gray2">
                Votre compte devra obligatoirement posséder un nom d’usage (pseudonyme) ou être constitué par Prénom + Nom, dans cet ordre. Ils ne devront pas contenir de caractères spéciaux ou de chiffres.
            </div>
            <a href="/" target="_blank" data-turbo="false" class="text-[12px]/[100%] border-b-1 border-b-main-black dark:border-b-main-white inline-block -mt-[0.10rem] pb-[4px] pl-[4px]">
                Lire le règlement <x-icon data-property="fill-main-black dark:fill-main-white" class="inline-block size-4 ml-1 mr-2" data-symbol="arrow-right"></x-icon>
            </a>
        </div>
        <div class="grid grid-cols-2 gap-4 mt-8">
            <button class="cursor-pointer Main:Primary:Bouton" name="submit" value="$1" type="submit">Valider</button>
            <a href="javascript:history.back()" class="text-center Main:Tertiary:Bouton">Retour</a>
        </div>`),`<x-modal data-title="${this.title}" data-opened="true">${e}</x-modal>`}}Object.filter=(e,t)=>Object.fromEntries(Object.entries(e).filter(t)),String.strip_tags=e=>e.replace(/<[^>]*>/gi,"").replace(/\n/gi,"<br>"),String.slugify=e=>(e=(e=(e=e.replace(/^\s+|\s+$/g,"")).toLowerCase()).replace(/[âà]/g,"a").replace(/[ôö]/g,"o").replace(/[éèë]/g,"e").replace(/['"]/g,"-").replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")).replace(/^-/g,"").replace(/-$/g,""),String.loremIpsum=(e=1e3)=>"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean nunc velit, pretium ut libero id, imperdiet imperdiet erat. Fusce odio odio, pharetra eget sapien non, egestas accumsan libero. Sed quis volutpat sapien, sed pharetra eros. Nunc eu odio convallis, gravida sapien eget, tincidunt turpis. Aliquam augue mi, consequat at ligula in, tincidunt facilisis est. In rutrum, purus eu ullamcorper egestas, risus leo consectetur magna, in vulputate leo justo vitae enim. Aliquam vulputate magna a nibh ultrices, ac vulputate enim mollis. Vivamus vel elementum ex, nec tristique tortor. Sed sollicitudin lectus a consequat vestibulum. Vestibulum commodo metus ipsum, quis ultrices turpis egestas non. Duis sollicitudin eros non metus pharetra malesuada.<br/><br/>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean nunc velit, pretium ut libero id, imperdiet imperdiet erat. Fusce odio odio, pharetra eget sapien non, egestas accumsan libero. Sed quis volutpat sapien, sed pharetra eros. Nunc eu odio convallis, gravida sapien eget, tincidunt turpis. Aliquam augue mi, consequat at ligula in, tincidunt facilisis est. In rutrum, purus eu ullamcorper egestas, risus leo consectetur magna, in vulputate leo justo vitae enim. Aliquam vulputate magna a nibh ultrices, ac vulputate enim mollis. Vivamus vel elementum ex, nec tristique tortor. Sed sollicitudin lectus a consequat vestibulum. Vestibulum commodo metus ipsum, quis ultrices turpis egestas non. Duis sollicitudin eros non metus pharetra malesuada.".substring(0,e),String.p2f=e=>e=null!==e?e.replace(/<br[^>]*>/gi,"\n"):e,String.replaceEmoji=t=>{var e=[...t.matchAll(/:([A-Za-z_]+):/gi)];async function a(t,a){return await(async()=>(void 0===window.smileys_list&&await fetch("https://hosting.forums-rpg.fr/popolaris/output/emoji.json").then(e=>e.json()).then(e=>{window.smileys_list=e}),window.smileys_list))().then(e=>{null!==e&&(e=Object.values(e).filter(e=>-1<e.shortcodes.join("").toLowerCase().indexOf(t.toLowerCase()))).length&&(a=a.replace(new RegExp(t,"gi"),e[0].emoji))}),a}return e.forEach(e=>{t=a(e[0],t)}),t},String.f2p=(e,t=!0)=>e=null!==e&&(e=(e=(e=(e=(e=(e=(e=e.replace(/\n/gi,"<br>")).replace(/\[s]/gi,'<span class="line-through">')).replace(/\[u]/gi,'<span class="underline underline-offset-3">')).replace(/\[i]/gi,'<span class="italic">')).replace(/\[b]/gi,'<span class="font-bold">')).replace(/\[tw]/gi,`<span @click="$el.className = ''" class="blur-[2px] hover:blur-none transition">`)).replace(/\[\/(tw|b|u|s|i)]/gi,"</span>"),t)?String.replaceEmoji(e):e,String.clean_json=e=>JSON.parse(e.replace(/\n/gi,"<br>")),String.clear_before=String.f2p,String.clear_after=String.p2f,String.decode_html=e=>{var t=document.createElement("textarea");return t.innerHTML=e,t.value},String.load=String.loadItem=(e,t={})=>{e=window.localStorage.getItem(e);return null!==e?"object"==typeof t?JSON.parse(e):"boolean"==typeof t?"false"!==e&&("true"===e||e):e:t},String.save=String.saveItem=(e,t,a={})=>{"object"==typeof a&&(t=JSON.stringify(t)),window.localStorage.setItem(e,t)},String.remove=String.removeItem=e=>{window.localStorage.removeItem(e)},String.convertDate=(r,e,t)=>{r=r.toLowerCase();var s=new Date,a=new Date,i=(a.setDate(s.getDate()-1),["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]);if(-1<r.indexOf("aujourd'hui"))r=r.replace("aujourd'hui à",s.getDate()+" "+i[s.getMonth()]+" "+s.getFullYear()+", ");else if(-1<r.indexOf("hier"))r=r.replace("hier à",a.getDate()+" "+i[a.getMonth()]+" "+a.getFullYear()+", ");else{s=[" - ","lun","mar","mer","jeu","ven","sam","dim","jan","fev","mars","avr","mai","juin","juil","aou","sept","oct","nov","déc"];let a=[", "];a=(a=e?a.concat(["lundi","mardi","mercredi","jeudi","vendredi","samedi","dimanche"]):a.concat("","","","","","","")).concat(i),s.forEach((e,t)=>{r=r.replace(RegExp(""+e,"g"),a[t])})}return t||(i.forEach((e,t)=>{r=r.replace(" "+e+" ","."+(t+1<10?"0":"")+(t+1)+".")}),r=r.replace(".20",".")),r};class NotionValueFormatter{constructor(e,t){this.source=e,this.className=t}read(){let e;return(e="database_id"===this.source[0].parent.type?new NotionDbValueFormatter(this.source):new NotionPageValueFormatter(this.source,this.className)).read()}}class NotionDbValueFormatter{constructor(e){this.source=e}read(){let r=[];return this.source.forEach(e=>{if("properties"in e){var t,a={};for(t in e.properties)a[t]=new NotionPropertyParser(e.properties[t]).parse();r.push(a)}}),new NotionDbOutput(r).format()}}class NotionPropertyParser{constructor(e){this.property=e}parse(){let a=[];if("url"in this.property)a.push(this.property.url);else if("select"in this.property){let e=this.property.select?.name??"";"color"in this.property.select&&(e=`<span class="notion_${this.property.select.color}">${e}</span>`),a.push(e)}else"multi_select"in this.property?this.property.multi_select.forEach(e=>{let t=e?.name??"";"color"in e&&(t=`<span class="notion_${e.color}">${t}</span>`),a.push(t)}):"rich_text"in this.property?this.property.rich_text.forEach(e=>{a.push(e?.plain_text??"")}):"files"in this.property?this.property.files.forEach(e=>{"external"in e?a.push(e.external?.url??""):"file"in e&&a.push(e.file?.url??"")}):"title"in this.property?this.property.title.forEach(e=>{a.push(e?.plain_text??"")}):"date"in this.property?a.push(this.property.date?.start??""):console.log(this.property);return a.join("")}}class NotionPageValueFormatter{constructor(e,t=""){return this.source=e,this.className=t,this}subItem(e){let t=e.id.replace(/[^0-9]/gi,""),a="",r="";"column"===e.type&&"width_ratio"in e.column&&(-1<(""+100*e.column.width_ratio).indexOf("33.33")&&(a+="w-1/3 mx-1"),-1<(""+100*e.column.width_ratio).indexOf("50"))&&(a+="w-1/2 mx-1");var s=this.parseItem(Object.assign({className:e.type},e[e.type]));return void 0!==s&&(r+=s),"column_list"===e.type&&(a+="flex -mx-1"),r+=`<div class="${a}" x-html="proxy${t}.content"
                                          x-data="{proxy${t}:new NotionPage('block-${e.id}')}"
                                          x-init="$nextTick(() => {proxy${t}.submit()})"></div>`}read(){let t=[],r="",a={},s=(this.source.forEach(e=>{"type"in e&&("callout"===e.type||"column_list"===e.type||"column"===e.type||e.has_children?(a[e.id]=this.subItem(e),t.push("{"+e.id+"}")):t.push(this.parseItem(Object.assign({className:e.type},e[e.type]))))}),!1);for(let e=5;0<e;e--)-1<t.join("").indexOf("notion_heading_"+e)&&(s="notion_heading_"+e);let i={p:!1,b:!1},n={p:!1,b:!1};for(var e in t.forEach(e=>{let t="%s",a=e;void 0!==a&&(-1<a.indexOf(s)&&""!==this.className&&(t='</div><div class="section_1">'+t),i.p=-1<a.indexOf("notion_paragraph"),i.b=-1<a.indexOf("notion_bulleted_list_item"),i.b?n.p?r=r.substring(0,r.length-7):n.b||(a='<span class="notion_paragraph">'+a):n.b&&(r+="</span>"),n.p=i.p,n.b=i.b,r+=t.replace("%s",a))}),r=(r=(r=""!==this.className?'<div class="section_1">'+r+"</div>":r).replace(/<span[^>]*><\/span>/gi,"")).replace(/<div[^>]*><\/div>/gi,"").replace(/<div class="section_1"><span class="notion_paragraph">([\s\S]*?)<\/span><\/div>/gi,'<div class="section_1"><span class="notion_paragraph_2">$1</span></div>'),a)r=r.replace(new RegExp("{"+e+"}","gi"),a[e]);return r}formatText(t){let a="%s",e="";return"annotations"in t&&["bold","italic","strikethrough","underline"].forEach(e=>{!0===t.annotations[e]&&(a="<"+e.substring(0,1)+">"+a+"</"+e.substring(0,1)+">")}),"href"in t&&null!==t.href&&(a=`<a class="underline underline-offset-3" href="${t.href}">${a}</a>`),"plain_text"in t&&(e=t.plain_text),[a,e]}parseItem(e){let a=[],r=this;if("cells"in e){let t=[];e.cells.forEach(e=>{e.forEach(e=>{e=r.formatText(e);""!==e[1].trim()&&t.push("<span>"+e[0].replace("%s",e[1])+"</span>")})}),a.push('<div class="grid grid-cols-'+t.length+'">'+t.join("")+"</div>")}else"file"in e?(t=e.file.url,a.push('<img class="rounded-lg" src="%s"/>'.replace("%s",t))):"rich_text"in e&&e.rich_text.forEach(e=>{e=r.formatText(e);a.push(e[0].replace("%s",e[1]))});var t=a.join("").replace(/\n/gi,"<br/>");return""!==t?"callout"===e.className||"quote"===e.className?this.calloutItem(t):`<span class="notion_${e.className}">${t}</span>`:""}calloutItem(e){return`<div class="notion_callout grid grid-cols-[100px_auto_70px]">
            <span class="notion_callout_before">&nbsp;</span>
            <span class="notion_callout_inner">${e}</span>
            <span class="notion_callout_after">&nbsp;</span>
        </div>`}}class NotionDbOutput{constructor(e){this.data=e}accentsTidy=function(e){let t=e.toLowerCase();return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(new RegExp(/\s/g),"")).replace(new RegExp(/[àáâãäå]/g),"a")).replace(new RegExp(/æ/g),"ae")).replace(new RegExp(/ç/g),"c")).replace(new RegExp(/[èéêë]/g),"e")).replace(new RegExp(/[ìíîï]/g),"i")).replace(new RegExp(/ñ/g),"n")).replace(new RegExp(/[òóôõö]/g),"o")).replace(new RegExp(/œ/g),"oe")).replace(new RegExp(/[ùúûü]/g),"u")).replace(new RegExp(/[ýÿ]/g),"y")).replace(new RegExp(/\W/g),"")};format(){return"Nom du feat"in this.data[0]?new NotionDbOutputAvatars(this.data).sort().format():"Rôle"in this.data[0]?new NotionDbOutputRoles(this.data).sort().format():"Signification"in this.data[0]?new NotionDbOutputLexique(this.data).sort().format():"Pouvoir"in this.data[0]?new NotionDbOutputPouvoirs(this.data).sort().format():"Date"in this.data[0]&&"Button"in this.data[0]&&"Message"in this.data[0]?new NotionDbOutputScenario(this.data).sort().format():"Date"in this.data[0]&&"Message"in this.data[0]?new NotionDbOutputNews(this.data).sort().format():"Métier"in this.data[0]?new NotionDbOutputMetiers(this.data).sort().format():(console.log(this.data[0]),"Soon")}}class NotionDbOutputLexique extends NotionDbOutput{letters=["A","B","C"];sort(){return this.data.sort(function(e,t){e=e.Nom.toLowerCase(),t=t.Nom.toLowerCase();return e<t?-1:t<e?1:0}),this}nextPage(){var e=[String.fromCharCode(this.letters[this.letters.length-1].charCodeAt(0)+1)];e.push(String.fromCharCode(e[e.length-1].charCodeAt(0)+1)),e.push(String.fromCharCode(e[e.length-1].charCodeAt(0)+1)),this.letters=e}format(){let r="",s='<span class="notion_heading_3 mb-0">%s</span>';return r+=""+s.replace("%s",this.letters.join(", ")),this.data.forEach(e=>{for(var t=e.Nom.substring(0,1).toUpperCase();!this.letters.includes(t);)this.nextPage(),r+="</span>"+s.replace("%s",this.letters.join(", "));var a=`<div class="notion_paragraph">
                <div class="mb-2">
                    <b>%s</b> : <span class="notion_tag notion_%s">%s</span>
                </div>
                %s
            </div>`;r+=a.replace("%s",e.Nom).replace("%s",-1<e["Catégorie"].indexOf("commun")?"default":"blue").replace("%s",e["Catégorie"]).replace("%s",e.Signification)}),`<div class="section_1">
            <span class="notion_heading_1">Lexique</span>
            ${r}
        </div>`}}class NotionDbOutputPouvoirs extends NotionDbOutput{section="";selected="Constellation";fields=["Disponibilité","Groupes","Constellation","Compensation","Origine"];sort(){let s=this;if(s.fields.forEach(e=>{-1<window.location.search.indexOf(e)&&(s.selected=e)}),"Groupes"===s.selected){let r=[];this.data.forEach(a=>{a.Groupes.split("</span>").forEach(e=>{var t;""!==e&&((t=Object.assign({},a)).Groupes=e+"</span>",r.push(t))})}),this.data=r}return this.data.sort(function(e,t){let a=e[s.selected].toLowerCase(),r=t[s.selected].toLowerCase();return"Compensation"===s.selected&&(a=-1<a.indexOf("faible")?"1 "+a:-1<a.indexOf("moyenne")?"2 "+a:-1<a.indexOf("forte")?"3 "+a:"4 "+a,r=-1<r.indexOf("faible")?"1 "+r:-1<r.indexOf("moyenne")?"2 "+r:-1<r.indexOf("forte")?"3 "+r:"4 "+r),a<r?-1:a>r?1:0}),this}format(){let a="";return this.data.forEach(t=>{this.fields.forEach(e=>{"Disponibilité"!==e&&(t[e]=t[e].replace(/<span([^>]*)>/gi,' <a href="'+window.location.pathname+"?s="+e+'"$1>'+e+" ").replace(/<\/span>/gi,"</a>")),e!==this.selected&&(t[e]=t[e].replace(/class=(['"])/gi,"class=$1notion_tag "))}),this.section!==t[this.selected]&&(""!==this.section&&(a+="</span>"),this.section=t[this.selected],a+=""+'<span class="notion_heading_3 mb-0">%s</span>'.replace("%s",this.section));var e=`<div class="notion_paragraph">
                <div class="mb-2">%s %s</div>
                %s %s %s %s %s
            </div>`;a+=e.replace("%s",t.Pouvoir).replace("%s",""!==t.Pseudonyme?" : <b>"+t.Pseudonyme+"</b>":"").replace("%s",t["Disponibilité"]).replace("%s","Origine"===this.selected?"":t.Origine).replace("%s","Constellation"===this.selected?"":t.Constellation).replace("%s","Groupes"===this.selected?"":t.Groupes.replace(/Groupes /gi,"")).replace("%s","Compensation"===this.selected?"":t.Compensation)}),`<div class="section_1">
            <span class="notion_heading_1">Pouvoirs</span>
            ${a}
        </div>`}}class NotionDbOutputMetiers extends NotionDbOutput{letters=["A","B","C"];sort(){return this.data.forEach(e=>{e.Lettre=this.accentsTidy(e["Métier"]).toUpperCase()}),this.data.sort(function(e,t){return e.Lettre<t.Lettre?-1:t.Lettre<e.Lettre?1:0}),this}nextPage(){var e=[String.fromCharCode(this.letters[this.letters.length-1].charCodeAt(0)+1)];e.push(String.fromCharCode(e[e.length-1].charCodeAt(0)+1)),e.push(String.fromCharCode(e[e.length-1].charCodeAt(0)+1)),this.letters=e}format(){let a="",r='<span class="notion_heading_3 mb-0">%s</span><span class="notion_paragraph">';return a+=""+r.replace("%s",this.letters.join(", ")),this.data.forEach(e=>{let t=0;for(;!this.letters.includes(e.Lettre.substring(0,1))||500<t;)this.nextPage(),a+="</span>"+r.replace("%s",this.letters.join(", ")),t++;a+="<div><b>%s</b> : %s</div>".replace("%s",e["Métier"]).replace("%s",e.Pseudonyme)}),`<div class="section_1">
            <span class="notion_heading_1">Métiers</span>
            ${a=a.replace(/<span class="notion_paragraph"><\/span>/gi,'<span class="notion_paragraph">Aucun</span>')}
        </div>`}}class NotionDbOutputRoles extends NotionDbOutput{section="";sort(){return this.data.sort(function(e,t){let a=e.Groupe.toLowerCase(),r=t.Groupe.toLowerCase();return"1"===e["Places disponibles"]||-1<e["Places disponibles"].indexOf("/1")?a+=" AAA":"Infini"===e["Places disponibles"]?a+=" ZZZ":a+=" BBB","1"===t["Places disponibles"]||-1<t["Places disponibles"].indexOf("/1")?r+=" AAA":"Infini"===t["Places disponibles"]?r+=" ZZZ":r+=" BBB",a+=" "+e["Rôle"].toLowerCase(),r+=" "+t["Rôle"].toLowerCase(),a<r?-1:a>r?1:0}),this}format(){let a="";return this.data.forEach(e=>{this.section!==e.Groupe&&(""!==this.section&&(a+="</span>"),this.section=e.Groupe,a+=""+'<span class="notion_heading_3 mb-0">%s</span><span class="notion_paragraph">'.replace("%s",this.section));var t=`<div class="mb-2">
                %s (%s) : <b>%s</b> %s
            </div>`;""!==e["Disponibilité"]&&(e["Disponibilité"]=e["Disponibilité"].replace("notion_","notion_tag notion_")),a+=t.replace("%s",e["Rôle"]).replace("%s",e["Places disponibles"]).replace("%s",e.Pseudonyme).replace("%s",e["Disponibilité"])}),`<div class="section_1">
            <span class="notion_heading_1">Rôles</span>
            ${a=a.replace(/<span class="notion_paragraph"><\/span>/gi,'<span class="notion_paragraph">Aucun</span>')}
        </div>`}}class NotionDbOutputNews extends NotionDbOutput{sort(){return this.data.sort(function(e,t){e=e.Date,t=t.Date;return e<t?-1:t<e?1:0}),this}format(){let a="";return this.data.forEach(e=>{var t=`<li class="flex flex-row mb-2">
                <div class="flex-shrink-0 flex items-center justify-between h-5 w-20 mr-4">
                    <x-icon data-property="fill-light-blue dark:fill-secondary-gold" class="inline-block size-5" data-symbol="%s"></x-icon>
                    <strong class="Main:Block:Pa:Tag">%s</strong>
                </div>
                <p class="Main:Paragraphe">%s</p>
            </li>`;a+=t.replace("%s",e.Icon.replace(/<[^>]*>/gi,"")).replace("%s",e.Date.split("-").reverse().join(".").replace(".20",".")).replace("%s",e.Message)}),""+a}}class NotionDbOutputScenario extends NotionDbOutput{sort(){return this.data.sort(function(e,t){e=e.Date,t=t.Date;return e<t?-1:t<e?1:0}),this}format(){let a="";return this.data.forEach(e=>{var t=`<div class="z-1 absolute w-full h-full top-0 left-0 bg-background-dark rounded-half-col overflow-hidden outline-2 outline-main-white dark:outline-main-black -outline-offset-1 outline-solid">
                 <img loading="lazy" src="%s" class="relative fade-gradient rounded-half-col object-cover w-full"/>
            </div>
            <div class="z-2 w-2/3 text-center mx-auto mb-8 mt-50">
                <a href="%s" class="absolute top-0 left-0 w-full h-full block z-2"></a>
                <h3 class="relative z-1 Title:H2 text-[40px]/[100%] md:text-[60px]/[100%]">%s</h3>
                <p class="relative z-1 Main:Paragraphe line-clamp-3 my-4">%s</p>
                <a href="%s" class="group relative z-3 Main:Primary:Bouton">
                    %s
                    <x-icon class="inline-block size-[20px] ml-2 relative top-[1px]"
                    data-property="fill-main-white group-hover:fill-main-blue group-hover:dark:fill-main-purple"
                    data-symbol="arrow-right"></x-icon>
                </a>
            </div>`;a+=t.replace("%s",e.Images).replace("%s",e.URL).replace("%s",e.Name).replace("%s",e.Message).replace("%s",e.URL).replace("%s",e.Button)}),""+a}}class NotionDbOutputAvatars extends NotionDbOutput{letters=["A","B","C"];sort(){return this.data.forEach(e=>{e.Lettre=this.accentsTidy(e["Nom du feat"]).toUpperCase()}),this.data.sort(function(e,t){return e.Lettre<t.Lettre?-1:t.Lettre<e.Lettre?1:0}),this}nextPage(){var e=[String.fromCharCode(this.letters[this.letters.length-1].charCodeAt(0)+1)];e.push(String.fromCharCode(e[e.length-1].charCodeAt(0)+1)),e.push(String.fromCharCode(e[e.length-1].charCodeAt(0)+1)),this.letters=e}format(){let a="",r='<span class="notion_heading_3 mb-0">%s</span><span class="notion_paragraph">';return a+=""+r.replace("%s",this.letters.join(", ")),this.data.forEach(e=>{for(var t=e.Lettre.substring(0,1).toUpperCase();!this.letters.includes(t);)this.nextPage(),a+="</span>"+r.replace("%s",this.letters.join(", "));""!==e["URL Profil"]&&(e.Pseudonyme=`<a target="_blank" class="underline underline-offset-3" href="${e["URL Profil"]}">${e.Pseudonyme}</a>`),a+='<div>%s <span class="text-grays-gray2">from</span> <i>%s</i> // <b>%s</b></div>'.replace("%s",e["Nom du feat"]).replace("%s",e["Univers du feat"]).replace("%s",e.Pseudonyme)}),`<div class="section_1">
            <span class="notion_heading_1">Avatars</span>
            ${a=a.replace(/<span class="notion_paragraph"><\/span>/gi,'<span class="notion_paragraph">Aucun</span>')}
        </div>`}}class SubjectEditor{static async defaultData(e=0,t=0){let a=new FormData;a.set("notify","on"),a.set("mode","editpost"),a.set("edit_reason",""),a.set("lt",""+t),a.set("disable_html","on"),a.set("disable_bbcode","on"),a.set("disable_smilies","on"),a.set("p",""+e),a.set("post","Envoyer");return[...(await(await fetch("/post?p="+e+"&mode=editpost")).text()).matchAll(/<input[^>]*name=['"]auth\[]['"][^>]*value=['"]([^"']*)['"][^>]*>/gi)].forEach(e=>{a.append("auth",e[1])}),a}static async characterSheet(e,t){t=await this.defaultData(e,t),e=String.loadItem("generator-"+e,{});e["subject-title"].length<5&&(e["subject-title"]=e["subject-title"]+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"),t.set("subject",e["subject-title"]),t.set("message",""+JSON.stringify(e)),await this.submit(t,async function(t){t=await t.text();if(-1<t.indexOf("template_message_body")){t=[...t.matchAll(/<a href=['"](\/viewtopic[^'"]*)['"]>/gi)];let e="/f5-fiches";1===t.length&&(e=t[0][1]),window.location.href=e}})}static async submit(e,t){await fetch("/post",{method:"POST",body:e}).then(e=>{null===t?window.location.reload():t(e)})}}class SubjectPoster{static async defaultData(e=1){let t=new FormData;t.set("notify","on"),t.set("mode","newtopic"),t.set("lt","0"),t.set("f",""+e),t.set("disable_html","on"),t.set("disable_bbcode","on"),t.set("disable_smilies","on"),t.set("post","Envoyer");return[...(await(await fetch("/post?f=1&mode=newtopic")).text()).matchAll(/<input[^>]*name=['"]auth\[]['"][^>]*value=['"]([^"']*)['"][^>]*>/gi)].forEach(e=>{t.append("auth",e[1])}),t}static async newCharacterSheet(){var e=await this.defaultData(5);let a=String.loadItem("generator",{});a["subject-type"]="fiche_presentation",a["subject-title"].length<5&&(a["subject-title"]=a["subject-title"]+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"),e.set("subject",a["subject-title"]),e.set("message",""+JSON.stringify(a)),await this.submit(e,async function(t){t=await t.text();if(-1<t.indexOf("template_message_body")){var t=[...t.matchAll(/<a href=['"](\/viewtopic[^'"]*)['"]>/gi)];let e="/f5-fiches";1===t.length&&(t=(e=t[0][1]).match(/\?t=[0-9]+/gi)[0].replace(/^[0-9]/gi,""),String.saveItem("generator-"+t,a),String.removeItem("generator")),window.location.href=e}})}static async submit(e,t){await fetch("/post",{method:"POST",body:e}).then(e=>{null===t?window.location.reload():t(e)})}}document.addEventListener("DOMContentLoaded",()=>{TextEditor.start()});class TextEditor{static intervalEditorStyle=null;static getContainer(){return document.querySelector(".sceditor-container")}static getTextarea(){return $("#text_editor_textarea")}static getValue(){return this.getTextarea().sceditor("instance").val()}static toggleDarkMode(){null!==this.getContainer()&&document.querySelector(".sceditor-button-updateDarkMode").click()}static countWords(e){return e.replace(/\[[^\]]*\]/gi,"").replace(/<[^>]*>/gi,"").replace(/[\,\.\;\!\?\-]/gi,"").replace(/[\s]+/gi," ").split(" ").length}static countChars(e){return e.replace(/\[[^\]]*\]/gi,"").replace(/<[^>]*>/gi,"").replace(/[\,\.\;\!\?\-]/gi,"").replace(/[\s]+/gi,"").length}static start(){let r=this;if(null===r.getTextarea().get(0))return!1;function s(){var e,t,a;null!==r.getContainer()&&(e=TextEditor.getValue(),e=0===(a=r.countChars(e))?0:r.countWords(e),(t=r.getContainer().childNodes[0]).setAttribute("data-characters",a),t.setAttribute("data-words",e),FA.SCEditor.sourceMode=r.getTextarea().sceditor("instance").inSourceMode(),a=FA.SCEditor.sourceMode?"HTML/BBCode":"WYSIWYG",String.save("editionMode",FA.SCEditor.sourceMode),r.getContainer().setAttribute("data-mode",a))}window.setInterval(s,1e3),this.intervalEditorStyle=window.setInterval(function(){if(null===r.getContainer())return!1;window.clearInterval(r.intervalEditorStyle),s();var e=String.load("editionMode",!0),e=(FA.SCEditor={sourceMode:e},r.getTextarea()),t=e.sceditor("instance");"object"==typeof t&&t.destroy();function a(){return'@import url("https://hosting.forums-rpg.fr/popolaris/output/chatbox-'+(Alpine.store("darkMode").on?"dark":"light")+'.css")'}$.sceditor.command.set("updateDarkMode",{exec:function(){this.css(a())},tooltip:"update dark mode"}),e.sceditor({locale:locale,width:$.sceditor.ie<=9?"":"100%",height:height,plugins:plugin,SCE_TopicID:"undefined"!=typeof SCE_TopicID?SCE_TopicID:"",quick_reply:"undefined"!=typeof quick_reply?quick_reply:"",toolbar:"bold,italic,underline,strike,left,center,right,justify,bulletlist,quote,code,faspoiler,fahide,table,servimg,image,link,size,color,font,removeformat,source,updateDarkMode",style:cssFile,rtl:!0===isRtl,startInSourceMode:FA.SCEditor.sourceMode,emoticonsEnabled:emoticonsEnabled,emoticonsCompat:!0,emoticonsRoot:"",emoticons:{dropdown:smileys},emoticonsURL:iframeSrc});t=e.sceditor("instance");t.css(a()),t.sourceMode(FA.SCEditor.sourceMode),t.updateOriginal()},1e3)}}function xml2json(e){return xml2jsonRecurse(e=cleanXML(e),0)}function xml2jsonRecurse(e){for(var t,a,r,s,i={};e.match(/<[^\/][^>]*>/);)t=(s=e.match(/<[^\/][^>]*>/)[0]).substring(1,s.length-1),-1==(a=e.indexOf(s.replace("<","</")))&&(t=s.match(/[^<][\w+$]*/)[0],-1==(a=e.indexOf("</"+t)))&&(a=e.indexOf("<\\/"+t)),r=(a=e.substring(s.length,a)).match(/<[^\/][^>]*>/)?xml2json(a):a,void 0===i[t]?i[t]=r:Array.isArray(i[t])?i[t].push(r):i[t]=[i[t],r],e=e.substring(2*s.length+1+a.length);return i}function cleanXML(e){return replaceAttributes(e=replaceAloneValues(e=replaceSelfClosingTags(e=(e=(e=(e=(e=e.replace(/<!--[\s\S]*?-->/g,"")).replace(/\n|\t|\r/g,"")).replace(/ {1,}<|\t{1,}</g,"<")).replace(/> {1,}|>\t{1,}/g,">")).replace(/<\?[^>]*\?>/g,""))))}function replaceSelfClosingTags(e){var t=e.match(/<[^\/][^>]*\/>/g);if(t)for(var a=0;a<t.length;a++){var r=t[a],s=r.substring(0,r.length-2),i=(s+=">",r.match(/[^<][\w+$]*/)[0]),n="</"+i+">",o="<"+i+">",l=s.match(/(\S+)=["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?/g);if(l)for(var c=0;c<l.length;c++){var p=l[c],d=p.substring(0,p.indexOf("="));o+="<"+d+">"+p.substring(p.indexOf('"')+1,p.lastIndexOf('"'))+"</"+d+">"}o+=n,e=e.replace(r,o)}return e}function replaceAloneValues(e){var t=e.match(/<[^\/][^>][^<]+\s+.[^<]+[=][^<]+>{1}([^<]+)/g);if(t)for(var a=0;a<t.length;a++){var r=t[a],s=r.substring(0,r.indexOf(">")+1),i=r.substring(r.indexOf(">")+1);e=e.replace(r,s+"<_@ttribute>"+i+"</_@ttribute>")}return e}function replaceAttributes(e){var t=e.match(/<[^\/][^>][^<]+\s+.[^<]+[=][^<]+>/g);if(t)for(var a=0;a<t.length;a++){var r=t[a],s="<"+r.match(/[^<][\w+$]*/)[0]+">",i=r.match(/(\S+)=["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?/g);if(i)for(var n=0;n<i.length;n++){var o=i[n],l=o.substring(0,o.indexOf("="));s+="<"+l+">"+o.substring(o.indexOf('"')+1,o.lastIndexOf('"'))+"</"+l+">"}e=e.replace(r,s)}return e}